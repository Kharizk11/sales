<div class="main-content">
    <div class="page-header">
        <h1 class="page-title" id="pageTitle">โ ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ</h1>
        <div class="page-actions">
            <button class="btn btn-outline" onclick="goBack()">
                โ ุฑุฌูุน
            </button>
        </div>
    </div>

    <div class="card" style="max-width: 900px; margin: 0 auto;">
        <div class="card-header">
            <h2 class="card-title" id="formTitle">ูุนูููุงุช ุงููุณุชุฎุฏู</h2>
        </div>
        <div class="card-body">
            <form id="userForm" onsubmit="handleUserSubmit(event)">
                <input type="hidden" id="userId">
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--spacing-lg);">
                    <!-- Basic Information Section -->
                    <div>
                        <h3 style="color: var(--primary); margin-bottom: var(--spacing-md); padding-bottom: var(--spacing-sm); border-bottom: 2px solid var(--primary-light);">
                            ๐ ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ
                        </h3>
                        
                        <div class="form-group">
                            <label for="userUsername">ุงุณู ุงููุณุชุฎุฏู *</label>
                            <input type="text" id="userUsername" required placeholder="ุฃุฏุฎู ุงุณู ุงููุณุชุฎุฏู" autocomplete="username">
                        </div>
                        
                        <div class="form-group">
                            <label for="userPassword" id="userPasswordLabel">ูููุฉ ุงููุฑูุฑ *</label>
                            <input type="password" id="userPassword" placeholder="ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ" autocomplete="new-password">
                            <small style="color: var(--text-muted); font-size: 0.85em; display: block; margin-top: var(--spacing-xs);" id="passwordHint">
                                (ููุชุนุฏูู: ุงุชุฑูู ูุงุฑุบุงู ููุญูุงุธ ุนูู ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ)
                            </small>
                        </div>
                        
                        <div class="form-group">
                            <label for="userName">ุงูุงุณู ุงููุงูู *</label>
                            <input type="text" id="userName" required placeholder="ุฃุฏุฎู ุงูุงุณู ุงููุงูู">
                        </div>
                        
                        <div class="form-group">
                            <label for="userEmail">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                            <input type="email" id="userEmail" placeholder="example@email.com" autocomplete="email">
                        </div>
                    </div>
                    
                    <!-- Role & Branch Section -->
                    <div>
                        <h3 style="color: var(--primary); margin-bottom: var(--spacing-md); padding-bottom: var(--spacing-sm); border-bottom: 2px solid var(--primary-light);">
                            ๐ ุงูุตูุงุญูุงุช ูุงููุฑุน
                        </h3>
                        
                        <div class="form-group">
                            <label for="userRole">ุงูุตูุงุญูุฉ *</label>
                            <select id="userRole" required onchange="updatePermissionsUI()">
                                <option value="user">๐ค ูุณุชุฎุฏู</option>
                                <option value="admin">๐ ูุฏูุฑ</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="userBranch">ุงููุฑุน</label>
                            <select id="userBranch">
                                <option value="">ุจุฏูู ูุฑุน (ุฌููุน ุงููุฑูุน)</option>
                            </select>
                            <small style="color: var(--text-muted); font-size: 0.85em; display: block; margin-top: var(--spacing-xs);">
                                ุงุฎุชุฑ ูุฑุน ูุญุฏุฏ ูููุณุชุฎุฏู ุฃู ุงุชุฑูู ูุงุฑุบุงู ูููุตูู ูุฌููุน ุงููุฑูุน
                            </small>
                        </div>
                        
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: var(--spacing-sm); cursor: pointer;">
                                <input type="checkbox" id="userIsActive" checked style="width: 20px; height: 20px; cursor: pointer;">
                                <span style="font-weight: 500;">ุงููุณุชุฎุฏู ูุดุท</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Permissions Section -->
                <div style="margin-top: var(--spacing-xl); padding-top: var(--spacing-lg); border-top: 2px solid var(--border-light);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-md);">
                        <h3 style="color: var(--primary); margin: 0;">
                            ๐ ุงูุตูุงุญูุงุช ุงููุฎุตุตุฉ
                        </h3>
                        <button type="button" class="btn btn-outline btn-sm" onclick="resetPermissionsToDefault()">
                            ๐ ุฅุนุงุฏุฉ ุชุนููู ููุงูุชุฑุงุถู
                        </button>
                    </div>
                    
                    <div id="permissionsContainer" style="background: var(--bg-secondary); padding: var(--spacing-lg); border-radius: var(--radius-md); border: 1px solid var(--border);">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing-md);">
                            <label style="display: flex; align-items: center; gap: var(--spacing-sm); cursor: pointer; padding: var(--spacing-sm); border-radius: var(--radius-sm); transition: background var(--transition);" 
                                   onmouseover="this.style.background='var(--hover)'" 
                                   onmouseout="this.style.background='transparent'">
                                <input type="checkbox" id="permAddSales" class="permission-checkbox" style="width: 20px; height: 20px; cursor: pointer;">
                                <span style="font-weight: 500;">โ ุฅุถุงูุฉ ูุจูุนุงุช</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: var(--spacing-sm); cursor: pointer; padding: var(--spacing-sm); border-radius: var(--radius-sm); transition: background var(--transition);" 
                                   onmouseover="this.style.background='var(--hover)'" 
                                   onmouseout="this.style.background='transparent'">
                                <input type="checkbox" id="permEditSales" class="permission-checkbox" style="width: 20px; height: 20px; cursor: pointer;">
                                <span style="font-weight: 500;">โ๏ธ ุชุนุฏูู ูุจูุนุงุช</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: var(--spacing-sm); cursor: pointer; padding: var(--spacing-sm); border-radius: var(--radius-sm); transition: background var(--transition);" 
                                   onmouseover="this.style.background='var(--hover)'" 
                                   onmouseout="this.style.background='transparent'">
                                <input type="checkbox" id="permDeleteSales" class="permission-checkbox" style="width: 20px; height: 20px; cursor: pointer;">
                                <span style="font-weight: 500;">๐๏ธ ุญุฐู ูุจูุนุงุช</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: var(--spacing-sm); cursor: pointer; padding: var(--spacing-sm); border-radius: var(--radius-sm); transition: background var(--transition);" 
                                   onmouseover="this.style.background='var(--hover)'" 
                                   onmouseout="this.style.background='transparent'">
                                <input type="checkbox" id="permViewReports" class="permission-checkbox" style="width: 20px; height: 20px; cursor: pointer;">
                                <span style="font-weight: 500;">๐ ุนุฑุถ ุงูุชูุงุฑูุฑ</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: var(--spacing-sm); cursor: pointer; padding: var(--spacing-sm); border-radius: var(--radius-sm); transition: background var(--transition);" 
                                   onmouseover="this.style.background='var(--hover)'" 
                                   onmouseout="this.style.background='transparent'">
                                <input type="checkbox" id="permExportReports" class="permission-checkbox" style="width: 20px; height: 20px; cursor: pointer;">
                                <span style="font-weight: 500;">๐ฅ ุชุตุฏูุฑ ุงูุชูุงุฑูุฑ</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: var(--spacing-sm); cursor: pointer; padding: var(--spacing-sm); border-radius: var(--radius-sm); transition: background var(--transition);" 
                                   onmouseover="this.style.background='var(--hover)'" 
                                   onmouseout="this.style.background='transparent'">
                                <input type="checkbox" id="permManageBranches" class="permission-checkbox" style="width: 20px; height: 20px; cursor: pointer;">
                                <span style="font-weight: 500;">๐ข ุฅุฏุงุฑุฉ ุงููุฑูุน</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: var(--spacing-sm); cursor: pointer; padding: var(--spacing-sm); border-radius: var(--radius-sm); transition: background var(--transition);" 
                                   onmouseover="this.style.background='var(--hover)'" 
                                   onmouseout="this.style.background='transparent'">
                                <input type="checkbox" id="permManageUsers" class="permission-checkbox" style="width: 20px; height: 20px; cursor: pointer;">
                                <span style="font-weight: 500;">๐ฅ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: var(--spacing-sm); cursor: pointer; padding: var(--spacing-sm); border-radius: var(--radius-sm); transition: background var(--transition);" 
                                   onmouseover="this.style.background='var(--hover)'" 
                                   onmouseout="this.style.background='transparent'">
                                <input type="checkbox" id="permViewAllBranches" class="permission-checkbox" style="width: 20px; height: 20px; cursor: pointer;">
                                <span style="font-weight: 500;">๐๏ธ ุนุฑุถ ุฌููุน ุงููุฑูุน</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Form Actions -->
                <div style="margin-top: var(--spacing-xl); padding-top: var(--spacing-lg); border-top: 2px solid var(--border-light); display: flex; gap: var(--spacing-md); justify-content: flex-end;">
                    <button type="button" class="btn btn-outline" onclick="goBack()">
                        ุฅูุบุงุก
                    </button>
                    <button type="submit" class="btn btn-primary" id="submitBtn">
                        ๐พ ุญูุธ ุงููุณุชุฎุฏู
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>




